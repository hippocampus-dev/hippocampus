apiVersion: batch/v1
kind: CronJob
metadata:
  name: my-cron-job
  annotations:
    skaffold.lifecycle-job-hook.kaidotio.github.io/hook: PostComplete
    skaffold.lifecycle-job-hook.kaidotio.github.io/job-template-group: batch
    skaffold.lifecycle-job-hook.kaidotio.github.io/job-template-version: v1
    skaffold.lifecycle-job-hook.kaidotio.github.io/job-template-kind: Job
    skaffold.lifecycle-job-hook.kaidotio.github.io/job-template-name: my-job
spec:
  schedule: "* * * * *"
  jobTemplate:
    spec:
      parallelism: 5
      completions: 5
      template:
        spec:
          restartPolicy: Never
          containers:
            - name: my-container
              image: debian:bookworm-slim
              command:
                - bash
                - -c
              args:
                - |
                  sleep $((RANDOM % 30 + 1))
---
apiVersion: batch/v1
kind: Job
metadata:
  name: my-job
spec:
  template:
    spec:
      restartPolicy: Never
      containers:
        - name: my-container
          image: busybox
          command:
            - date
